# ==================================================================
# 222.place Matchmaking Platform Environment Configuration
# ==================================================================

# ------------------------------
# Core Application Settings
# ------------------------------
# Application name and version
APP_NAME=222place
APP_VERSION=1.0.0
APP_ENV=development

# Security
SECRET_KEY=your-super-secret-key-change-this-in-production
JWT_SECRET_KEY=your-jwt-secret-key-change-this-too
ENCRYPTION_KEY=your-32-byte-encryption-key-for-sensitive-data

# CORS and Security Headers
CORS_ORIGINS=http://localhost:3000,https://localhost:3000
TRUSTED_HOSTS=localhost,127.0.0.1

# ------------------------------
# Database Configuration
# ------------------------------
# Primary PostgreSQL Database
DATABASE_URL=postgresql://postgres:postgres@db:5432/matchmaking_db
DB_HOST=db
DB_PORT=5432
DB_NAME=matchmaking_db
DB_USER=postgres
DB_PASSWORD=postgres
DB_SSL_MODE=prefer

# Connection Pool Settings
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# ------------------------------
# Redis Configuration
# ------------------------------
REDIS_URL=redis://redis:6379/0
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=
REDIS_POOL_SIZE=20

# Session and Cache Configuration
CACHE_TYPE=redis
CACHE_DEFAULT_TIMEOUT=300
SESSION_TYPE=redis
SESSION_PERMANENT=false
SESSION_USE_SIGNER=true

# ------------------------------
# Vector Database (Qdrant)
# ------------------------------
QDRANT_HOST=qdrant
QDRANT_PORT=6333
QDRANT_API_KEY=
QDRANT_COLLECTION_NAME=user_embeddings
EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2

# ------------------------------
# Celery Task Queue
# ------------------------------
CELERY_BROKER_URL=redis://redis:6379/1
CELERY_RESULT_BACKEND=redis://redis:6379/2
CELERY_TASK_SERIALIZER=json
CELERY_ACCEPT_CONTENT=json
CELERY_RESULT_SERIALIZER=json
CELERY_TIMEZONE=UTC
CELERY_ENABLE_UTC=true

# Worker Configuration
CELERY_WORKER_CONCURRENCY=4
CELERY_WORKER_MAX_TASKS_PER_CHILD=1000
CELERY_WORKER_PREFETCH_MULTIPLIER=1

# ------------------------------
# Email Configuration
# ------------------------------
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_TLS=true
SMTP_SSL=false
FROM_EMAIL=noreply@222place.local
FROM_NAME=222.place

# ------------------------------
# Web Frontend Configuration
# ------------------------------
FRONTEND_URL=http://localhost:3000
API_URL=http://localhost:5000
WS_URL=ws://localhost:5000

# Next.js Configuration
NEXT_PUBLIC_API_URL=http://localhost:5000
NEXT_PUBLIC_WS_URL=ws://localhost:5000
NEXT_PUBLIC_APP_NAME=222.place
NEXT_PUBLIC_DEFAULT_LOCALE=en
NEXT_PUBLIC_SUPPORTED_LOCALES=en,es

# ------------------------------
# API Server Configuration
# ------------------------------
API_HOST=0.0.0.0
API_PORT=5000
API_WORKERS=4
API_TIMEOUT=60
API_MAX_REQUEST_SIZE=50MB

# Rate Limiting
RATE_LIMIT_STORAGE_URL=redis://redis:6379/3
RATE_LIMIT_DEFAULT=100/hour
RATE_LIMIT_AUTH=20/minute
RATE_LIMIT_MATCHING=10/hour

# ------------------------------
# Matching Engine Configuration
# ------------------------------
# Matching Algorithm Settings
MATCHING_ALGORITHM=hybrid
MATCHING_SIMILARITY_THRESHOLD=0.7
MATCHING_MAX_DISTANCE_KM=50
MATCHING_MAX_AGE_DIFFERENCE=10
MATCHING_DIVERSITY_FACTOR=0.3

# Recommendation Settings
RECOMMENDATIONS_COUNT=10
RECOMMENDATIONS_REFRESH_HOURS=24
EVENT_SUGGESTIONS_COUNT=5

# ------------------------------
# File Upload and Storage
# ------------------------------
UPLOAD_FOLDER=/app/uploads
MAX_CONTENT_LENGTH=10MB
ALLOWED_EXTENSIONS=jpg,jpeg,png,gif,pdf
STORAGE_TYPE=local

# S3 Configuration (optional)
S3_BUCKET=
S3_REGION=
S3_ACCESS_KEY=
S3_SECRET_KEY=
S3_ENDPOINT_URL=

# ------------------------------
# Logging Configuration
# ------------------------------
LOG_LEVEL=INFO
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s
LOG_FILE=/app/logs/app.log
LOG_MAX_SIZE=100MB
LOG_BACKUP_COUNT=5

# Sentry Configuration (optional)
SENTRY_DSN=
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1

# ------------------------------
# Monitoring and Health Checks
# ------------------------------
HEALTH_CHECK_ENABLED=true
METRICS_ENABLED=true
PROMETHEUS_PORT=9090

# ------------------------------
# Security and Privacy
# ------------------------------
# Password Requirements
MIN_PASSWORD_LENGTH=8
REQUIRE_SPECIAL_CHARACTERS=true
PASSWORD_EXPIRY_DAYS=90

# Session Configuration
SESSION_TIMEOUT_MINUTES=60
REMEMBER_ME_DURATION_DAYS=30
MAX_LOGIN_ATTEMPTS=5
LOCKOUT_DURATION_MINUTES=15

# Data Retention
DATA_RETENTION_DAYS=365
INACTIVE_ACCOUNT_DAYS=180
MESSAGE_RETENTION_DAYS=90

# Content Moderation
MODERATION_ENABLED=true
PROFANITY_FILTER_ENABLED=true
AUTO_MODERATION_THRESHOLD=0.8

# ------------------------------
# Feature Flags
# ------------------------------
FEATURE_VECTOR_MATCHING=true
FEATURE_EVENT_SUGGESTIONS=true
FEATURE_GROUP_CHAT=true
FEATURE_VIDEO_CHAT=false
FEATURE_PUSH_NOTIFICATIONS=true
FEATURE_EMAIL_NOTIFICATIONS=true

# ------------------------------
# Localization
# ------------------------------
DEFAULT_TIMEZONE=UTC
DEFAULT_LANGUAGE=en
SUPPORTED_LANGUAGES=en,es
DATE_FORMAT=%Y-%m-%d
TIME_FORMAT=%H:%M:%S

# ------------------------------
# External Services
# ------------------------------
# Google Maps API (for location services)
GOOGLE_MAPS_API_KEY=your-google-maps-api-key

# OpenAI API (for AI features)
OPENAI_API_KEY=your-openai-api-key
OPENAI_MODEL=gpt-3.5-turbo

# Twilio (for SMS notifications)
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_PHONE_NUMBER=

# ------------------------------
# Development and Testing
# ------------------------------
DEBUG=false
TESTING=false
FLASK_DEBUG=false

# Test Database
TEST_DATABASE_URL=postgresql://postgres:postgres@db:5432/test_matchmaking_db

# Development Tools
ENABLE_CORS=true
ENABLE_SWAGGER=true
ENABLE_PROFILER=false

# ------------------------------
# Docker and Deployment
# ------------------------------
# Container Configuration
COMPOSE_PROJECT_NAME=222place
COMPOSE_FILE=docker-compose.yml

# Health Check Intervals
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=3

# Resource Limits
MEMORY_LIMIT=1g
CPU_LIMIT=1.0

# ------------------------------
# SSL/TLS Configuration
# ------------------------------
SSL_ENABLED=false
SSL_CERT_PATH=/etc/ssl/certs/222place.crt
SSL_KEY_PATH=/etc/ssl/private/222place.key
SSL_CA_PATH=/etc/ssl/certs/ca.crt

# Let's Encrypt (for production)
LETSENCRYPT_EMAIL=admin@222place.local
LETSENCRYPT_DOMAINS=222place.local

# ------------------------------
# Backup Configuration
# ------------------------------
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=
BACKUP_ENCRYPTION_KEY=